#!/usr/bin/expect -f

set timeout -1
set ip "138.249.7.221"
set user "root"
set password "4yKpBH%oZ\$T@UMfb"

# SSH and update
spawn ssh -o StrictHostKeyChecking=no $user@$ip "cd /var/www/basicfit && git pull origin main && npm install && npx prisma generate && npx tsx prisma/seed.ts"
expect {
  "password:" { send "$password\r"; exp_continue }
  eof
}
